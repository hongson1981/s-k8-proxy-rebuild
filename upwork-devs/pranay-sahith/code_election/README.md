# Code election for solutions of https://github.com/k8-proxy/s-k8-proxy-rebuild/issues/2

## comparison of different approaches considering functionality, scalability and complexity

|               | Pros                                                                                                                                                                        | Cons                                                                                                                                                                                                        |
|---------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| hanyhesham    | Uses secrets where necessary                                                                                                                                                | Nginx pod was not deployed   correctly, so couldn't test functionality                                                                                                                                      |
|               |                                                                                                                                                                             | Hardcoded namespace value in the   value of environment variable ICAP_FQDN in squid.yml                                                                                                                     |
|               |                                                                                                                                                                             | Created secrets based on script   files, which won't work when the script size increases                                                                                                                    |
|               |                                                                                                                                                                             | Added redundant entrypoint   script upwork-devs/hanyhesham/k8s-manifests/images/nginx/docker-entrypoint.sh   when the functionality is already inbuild in the nginx docker image                            |
|               |                                                                                                                                                                             | Hardcoded rootdomain in squid   rewriter file                                                                                                                                                               |
|               |                                                                                                                                                                             | Squid Dockerfile uses   "squid-reverse" base image which needs to be built based on another   squid Dockerfile from   https://github.com/k8-proxy/k8-reverse-proxy/blob/develop/stable-src/squid/Dockerfile |
| pranay-sahith | Uses helm charts for   deployment.<br>     This helps to easily update deployment configuration without updating the   code                                                 | Currently uses docker public   images from dockerhub                                                                                                                                                        |
|               | Uses only environment variables   and nothing is hardcoded                                                                                                                  |                                                                                                                                                                                                             |
|               | Using environment variables   easily deploy to different root domain without updating code repo                                                                             |                                                                                                                                                                                                             |
|               | Supports scaling each pod of   nginx, squid and icap based on cpu and memory usage when enabled and given   the k8s cluster has been setup with horizontal pod autoscaling. |                                                                                                                                                                                                             |
|               | Uses k8s secrets to store   sensitve values                                                                                                                                 |                                                                                                                                                                                                             |
| son-ha        | Quick way to deploy and test in   local k8s cluster                                                                                                                         | Doesn't provide k8s manifest   files                                                                                                                                                                        |
|               |                                                                                                                                                                             | Uses kompose to deploy a   docker-compose file to k8s.<br>     This uses local files to create and mount volumes on the k8s cluster which   doesn't work on a remote k8s cluster.                           |
|               |                                                                                                                                                                             | Uses hardcoded values for   environment variables                                                                                                                           
